webpackJsonp([2],{5:function(e,t,a){e.exports=a("JS2t")},JS2t:function(e,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,s){"use strict";var i=Backbone.Model.extend({defaults:{endDate:null,startDate:null,calendar:null},clear:function(){this.clearSelectedDate(null)},isValid:function(){return!(!this.has("calendar")||this.get("calendar")<1)&&this.getNights()>=0},clearSelectedDate:function(e){this.set({startDate:null,endDate:null}),this.set("calendar",e),this.trigger("clear_dates")},getNights:function(){return this.has("endDate")&&this.has("startDate")?this.get("endDate").diff(this.get("startDate"),"days"):-1}}),n=Backbone.View.extend({options:{debug:!1,marker:".scheduler__marker",popper:".scheduler__popper"},events:{"click      .scheduler__body .scheduler__date":"setSelectionDate","mouseenter .scheduler__body .scheduler__date":"drawMarkerOnHover","click      .schedule__actions [data-schedule-action]":"triggerClickAction"},initialize:function(){this.model=new i,this.$marker=this.$el.find(this.options.marker),this.$marker.hide(),this.$popper=this.$el.find(this.options.popper),this.$popper.hide(),this.popper=new t(this.$marker,this.$popper,{placement:"bottom",modifiers:{flip:{enabled:!1},hide:{enabled:!1},preventOverflow:{enabled:!1}}}),e(document).on("keyup",this.onKeyup.bind(this)),this.listenTo(this.model,"change:startDate change:endDate",this.setMarkerPosition),this.listenTo(this.model,"clear_dates",this.onClearSelectedDates),this.options.debug&&this.listenTo(this.model,"change",this.debug),this.$el.data("scheduler",this)},debug:function(){this.model.has("startDate")&&this.model.has("endDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format("YYYY-MM-DD")+" - "+this.model.get("endDate").format("YYYY-MM-DD")):this.model.has("startDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format("YYYY-MM-DD")+" - null"):this.model.has("endDate")?console.log(this.model.get("calendar"),"null - "+this.model.get("endDate").format("YYYY-MM-DD")):console.log("null - null")},onKeyup:function(e){27==e.keyCode&&this.model.clearSelectedDate()},triggerClickAction:function(t){t.preventDefault();var a=this.model;if(!a.isValid())return!1;var s=e(t.currentTarget);if(!s.data("scheduleAction"))return!1;this.trigger("action:"+s.data("scheduleAction"),t,a)},onClearSelectedDates:function(){this.$popper.hide(),this.$marker.find("span").text("1"),this.trigger("clear")},setSelectionDate:function(t){var a=e(t.currentTarget),i=this.getUnitByElement(a),n=s(a.data("date"));this.model.has("startDate")&&this.model.has("endDate")?this.model.clearSelectedDate(i):((this.model.has("calendar")&&i!==this.model.get("calendar")||this.model.has("startDate")&&n.isBefore(this.model.get("startDate"),"day"))&&this.model.clearSelectedDate(i),this.model.has("startDate")||this.model.has("endDate")?(this.model.set("endDate",n.clone()),this.popper.update(),this.$popper.show(),this.trigger("apply",this.model,this)):(this.model.set("calendar",i),this.model.set("startDate",n.clone())))},setMarkerPosition:function(){var e=this.model.get("endDate"),t=this.model.get("startDate");if(_.isNull(t)&&_.isNull(e))this.$marker.css("width",60).hide();else{var a=this.getElementByDate(this.model.get("calendar"),t);if(_.isNull(e)){var s=this.getCellPossiton(a);this.$marker.show().css({top:s.top,left:s.left})}else{var i=this.getElementByDate(this.model.get("calendar"),e);this.$marker.css("width",60*(i.index()-a.index()+1))}}},drawMarkerOnHover:function(t){var a=e(t.currentTarget),i=this.getUnitByElement(a);if(this.model.has("calendar")&&this.model.get("calendar")===i&&this.model.has("startDate")&&(!this.model.has("startDate")||!this.model.has("endDate"))){var n=s(a.data("date")),o=this.model.get("startDate");if(o.isSameOrBefore(n,"day")){var l=this.getElementByDate(i,o),r=a.index()-l.index()+1;this.$marker.css("width",60*r),this.$marker.find("span").text(r)}}},getElementByDate:function(e,t){return"object"===(void 0===t?"undefined":a(t))&&(t=t.format("YYYY-MM-DD")),this.$el.find('[data-calendar="'+e+'"]').find('.scheduler__date[data-date="'+t+'"]')},getUnitByElement:function(t){var a=e(t).data("calendar");return void 0===a&&(a=e(t).closest("[data-calendar]").data("calendar")),a=parseInt(a,10),isNaN(a)?0:a},getCellPossiton:function(e){var t=e.offset(),a=this.$el.find(".scheduler__body").offset();return{top:t.top-a.top,left:t.left-a.left}}});TheAweBooking.ScheduleCalendar=n}(jQuery,TheAweBooking.Popper,TheAweBooking.momment||window.moment)}},[5]);