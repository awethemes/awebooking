webpackJsonp([2],{5:function(e,t,a){e.exports=a("JS2t")},JS2t:function(e,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,s){"use strict";var i=Backbone.Model.extend({defaults:{unit:null,endDate:null,startDate:null},validate:function(e,t){},clearSelectedDate:function(e){this.set({startDate:null,endDate:null}),this.set("unit",e)},getNights:function(){return this.has("endDate")&&this.has("startDate")?this.get("endDate").diff(this.get("startDate"),"days"):0}});new(Backbone.View.extend({options:{debug:!0,marker:".awebooking-schedule__marker",popper:".awebooking-schedule_popper"},events:{"click .awebooking-schedule__day":"setSelectionDate","mouseenter .awebooking-schedule__day":"drawMarkerOnHover"},initialize:function(){this.model=new i,this.$marker=this.$el.find(this.options.marker),this.$marker.hide(),this.$popper=this.$el.find(this.options.popper),this.$popper.hide(),this.popper=new t(this.$marker,this.$popper,{placement:"bottom",modifiers:{flip:{enabled:!1},hide:{enabled:!1},preventOverflow:{enabled:!1}}}),e(document).on("keyup",this.keyup.bind(this)),this.listenTo(this.model,"change:startDate change:endDate",this.setMarkerPosition),this.options.debug&&this.listenTo(this.model,"change",this.debug),this.$el.data("schedule-calendar",this)},debug:function(){this.model.has("startDate")&&this.model.has("endDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format("YYYY-MM-DD")+" - "+this.model.get("endDate").format("YYYY-MM-DD")):this.model.has("startDate")?console.log(this.model.get("calendar"),this.model.get("startDate").format("YYYY-MM-DD")+" - null"):this.model.has("endDate")&&console.log(this.model.get("calendar"),"null - "+this.model.get("endDate").format("YYYY-MM-DD"))},keyup:function(e){27==e.keyCode&&(this.model.clearSelectedDate(),this.$popper.hide())},setSelectionDate:function(t){var a=e(t.currentTarget),i=this.getUnitByElement(a),o=s(a.data("date"));(this.model.has("calendar")&&i!==this.model.get("calendar")||this.model.has("startDate")&&this.model.has("endDate")||this.model.has("startDate")&&o.isBefore(this.model.get("startDate"),"day"))&&(this.model.clearSelectedDate(i),this.$popper.hide()),this.model.has("startDate")||this.model.has("endDate")?(this.model.set("endDate",o.clone()),this.$popper.show(),this.popper.update(),this.trigger("apply",this.model,this)):(this.model.set("calendar",i),this.model.set("startDate",o.clone()))},setMarkerPosition:function(){var e=this.model.get("endDate"),t=this.model.get("startDate");if(_.isNull(t)&&_.isNull(e))this.$marker.css("width",60).hide();else{var a=this.getElementByDate(this.model.get("calendar"),t);if(_.isNull(e)){var s=this.getCellPossiton(a);this.$marker.show().css({top:s.top,left:s.left})}else{var i=this.getElementByDate(this.model.get("calendar"),e);this.$marker.css("width",60*(i.index()-a.index()+1))}}},drawMarkerOnHover:function(t){var a=e(t.currentTarget),i=this.getUnitByElement(a);if(this.model.has("calendar")&&this.model.get("calendar")===i&&this.model.has("startDate")&&(!this.model.has("startDate")||!this.model.has("endDate"))){var o=s(a.data("date")),n=this.model.get("startDate");if(n.isSameOrBefore(o,"day")){var l=this.getElementByDate(i,n),d=a.index()-l.index()+1;this.$marker.css("width",60*d),this.$marker.find("span").html(d+" night(s)")}}},getElementByDate:function(e,t){return"object"===(void 0===t?"undefined":a(t))&&(t=t.format("YYYY-MM-DD")),this.$el.find('[data-calendar="'+e+'"]').find('.awebooking-schedule__day[data-date="'+t+'"]')},getUnitByElement:function(t){var a=e(t).data("calendar");return void 0===a&&(a=e(t).closest("[data-calendar]").data("calendar")),a=parseInt(a,10),isNaN(a)?0:a},getCellPossiton:function(e){var t=e.offset(),a=this.$el.find(".awebooking-schedule__body").offset();return{top:t.top-a.top,left:t.left-a.left}}}))({el:".awebooking-schedule"})}(jQuery,TheAweBooking.Popper,TheAweBooking.momment||window.moment)}},[5]);