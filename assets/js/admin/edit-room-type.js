webpackJsonp([6],{3:function(e,t,i){e.exports=i("XKE6")},XKE6:function(e,t,i){"use strict";var o=window.jQuery,s=window.TheAweBooking,r={el:"#abkng-rooms",template:"#awebooking-rooms-manager-template",data:{rooms:[],totalRooms:0,roomTypeTitle:""},created:function(){this.rooms=window.ABKNG_ROOMS||[],this.totalRooms=this.rooms.length,this.roomTypeTitle=o("#title").val(),0==this.totalRooms&&(this.totalRooms=1,this.regenerateRooms())},methods:{regenerateRooms:function(){var e=this.rooms.length,t=parseInt(this.totalRooms,10);if(this.roomTypeTitle=o("#title").val(),t<=0&&(this.totalRooms=1),t>e)for(var i=e;i<t;i++)this.rooms.push({id:-1,name:this.roomTypeTitle+" - "+(i+1)});else if(t<e&&confirm(s.trans("ask_reduce_the_rooms")))for(var i=e-1;i>=t;i--)this.rooms.splice(i,1)},deleteRoomByIndex:function(e){confirm(s.trans("warning"))&&this.rooms.length>1&&(this.rooms.splice(e,1),this.totalRooms=this.rooms.length)}}},n={el:"#extra-services",template:"#awebooking-manager-service-template",data:{services:[],all_services:[],serviceExist:0,newService:{name:"",value:0,operation:"add",type:"optional"},showAddNewContent:!1},created:function(){this.defaultService=this.newService,this.services=window.ABKNG_CURRENT_SERVICES||[],this.all_services=window.ABKNG_ALL_SERVICES||[]},methods:{isPricable:function(){return"increase"==this.newService.operation||"decrease"==this.newService.operation},addNewService:function(){var e=this,t=this.newService;t.room_type=o("#post_ID").val(),wp.ajax.post("add_awebooking_service",t).done(function(t){t.id&&(e.all_services.push(t),e.services.push(t),e.newService=defaultService,e.showAddNewContent=!1)}).fail(function(e){alert(e.message)})},deleteService:function(e){this.services.splice(e,1)},checkIncludeService:function(e){return void 0!==_.find(this.services,function(t){return t.id==e})},addNewServiceExist:function(){var e=this.serviceExist;if(void 0!==e&&0!=e){var t=_.find(this.all_services,function(t){return t.id==e});this.services.push(t),this.serviceExist=0}},checkOperation:function(e,t){switch(e){case"add":e="+ "+t;break;case"add-daily":e="+ "+t+"/night";break;case"add-person":e="+ "+t+"/person";break;case"add-person-daily":e="+ "+t+"/person/night";break;case"increase":e="+ "+t+"%";break;case"sub":e="- "+t;break;case"sub-daily":e="- "+t+"/night";break;case"decrease":e="- "+t+"%"}return e},buildTitle:function(e){return e.name+" "+this.checkOperation(e.operation,e.value)}}};o(function(){var e=new s.Vue(r);new s.Vue(n);o("#title").on("change",function(){var t=o(this).val();1===e.$data.rooms.length&&" - 1"==e.$data.rooms[0].name&&(e.$data.rooms[0].name=t+" - 1")})})}},[3]);