{"version":3,"sources":["admin/settings.js"],"names":["$","awebooking","window","settings","_awebookingSettings","MainSetting","changed","on","onbeforeunload","i18n","nav_warning","main","handleLeaving","jQuery"],"mappings":";;;;;;;;AAAA,CAAC,UAASA,CAAT,EAAY;AACX;;AAEA,MAAMC,aAAaC,OAAOD,UAAP,IAAqB,EAAxC;AACA,MAAME,WAAWD,OAAOE,mBAAP,IAA8B,EAA/C;;AAJW,MAMLC,WANK;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAOT;;;;;AAPS,sCAYO;AACd,YAAIC,UAAU,KAAd,CADc,CAGd;;AACAN,UAAE,mCAAF,EAAuCO,EAAvC,CAA2C,QAA3C,EAAqD,YAAW;AAC9DD,oBAAU,IAAV;AACD,SAFD;AAIAN,UAAE,sBAAF,EACGO,EADH,CACM,OADN,EACe,oBADf,EACqC,YAAW;AAC5C,cAAID,OAAJ,EAAa;AACXJ,mBAAOM,cAAP,GAAwB,YAAW;AACjC,qBAAOL,SAASM,IAAT,CAAcC,WAArB;AACD,aAFD;AAGD,WAJD,MAIO;AACLR,mBAAOM,cAAP,GAAwB,IAAxB;AACD;AACF,SATH,EAUGD,EAVH,CAUM,OAVN,EAUe,gBAVf,EAUiC,YAAW;AACxCL,iBAAOM,cAAP,GAAwB,IAAxB;AACD,SAZH;AAaD;AAjCQ;;AAAA;AAAA;AAoCX;;;AACAR,IAAE,YAAW;AACX,QAAMW,OAAO,IAAIN,WAAJ,EAAb;AAEAM,SAAKC,aAAL;AACD,GAJD;AAMD,CA3CD,EA2CGC,MA3CH","sourcesContent":["(function($) {\n  'use strict';\n\n  const awebooking = window.awebooking || {};\n  const settings = window._awebookingSettings || {};\n\n  class MainSetting {\n    /**\n     * Handle leaving using window.onbeforeunload.\n     *\n     * @return {void}\n     */\n    handleLeaving() {\n      let changed = false;\n\n      // Set the changed if any controls fire change.\n      $('input, textarea, select, checkbox').on( 'change', function() {\n        changed = true;\n      });\n\n      $('.awebooking-settings')\n        .on('click', '.nav-tab-wrapper a', function() {\n          if (changed) {\n            window.onbeforeunload = function() {\n              return settings.i18n.nav_warning;\n            };\n          } else {\n            window.onbeforeunload = null;\n          }\n        })\n        .on('click', '.submit button', function() {\n          window.onbeforeunload = null;\n        });\n    }\n  }\n\n  /** Document ready */\n  $(function() {\n    const main = new MainSetting;\n\n    main.handleLeaving();\n  });\n\n})(jQuery);\n"],"file":"settings.js"}