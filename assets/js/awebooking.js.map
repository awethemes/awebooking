{"version":3,"names":[],"mappings":"","sources":["awebooking.js"],"sourcesContent":["const lodashDefaults = require('lodash.defaults');\r\n\r\nwindow.awebooking = {};\r\n\r\n(function ($, plugin) {\r\n  'use strict';\r\n\r\n  // Polyfill location.origin in IE, @see https://stackoverflow.com/a/25495161\r\n  if (!window.location.origin) {\r\n    window.location.origin = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n  }\r\n\r\n  // Main objects\r\n  plugin.utils = {};\r\n  plugin.instances = {};\r\n  plugin.utils.rangeDates = require('./core/flatpickr-dates.js');\r\n\r\n  /**\r\n   * Configure.\r\n   *\r\n   * @type {Object}\r\n   */\r\n  plugin.config = lodashDefaults(window._awebooking, {\r\n    route: window.location.origin + '?awebooking_route=/',\r\n    ajax_url: window.location.origin + '/wp-admin/admin-ajax.php',\r\n    i18n: {\r\n      date_format: 'F j, Y',\r\n      time_format: 'H:i:s',\r\n    }\r\n  });\r\n\r\n  /**\r\n   * The admin route.\r\n   *\r\n   * @param  {string} route\r\n   * @return {string}\r\n   */\r\n  plugin.route = function (route) {\r\n    return this.config.route + (route || '').replace(/^\\//g, '');\r\n  };\r\n\r\n  /**\r\n   * Create new datepicker.\r\n   *\r\n   * @see https://flatpickr.js.org/options/\r\n   *\r\n   * @return {flatpickr}\r\n   */\r\n  plugin.datepicker = function (instance, options) {\r\n    const i18n = plugin.config.i18n;\r\n    const defaults = plugin.config.datepicker;\r\n    const disable = Array.isArray(defaults.disable) ? defaults.disable : [];\r\n\r\n    if (Array.isArray(defaults.disable_days)) {\r\n      disable.push(function (date) {\r\n        return defaults.disable_days.indexOf(date.getDay()) !== -1;\r\n      });\r\n    }\r\n\r\n    const min_date = new Date().fp_incr(defaults.min_date);\r\n    const max_date = (defaults.max_date && defaults.max_date !== 0) ? new Date().fp_incr(defaults.max_date) : '';\r\n\r\n    const fp = flatpickr(instance, lodashDefaults(options, {\r\n      dateFormat: 'Y-m-d',\r\n      ariaDateFormat: i18n.date_format,\r\n      minDate: 'today',\r\n      // maxDate: max_date,\r\n      // disable: disable,\r\n      showMonths: defaults.show_months,\r\n      enableTime: false,\r\n      enableSeconds: false,\r\n      onReady(_, __, fp) {\r\n        fp.calendarContainer.classList.add('awebooking-datepicker');\r\n      }\r\n    }));\r\n\r\n    return fp;\r\n  };\r\n\r\n  /**\r\n   * Document ready.\r\n   *\r\n   * @return {void}\r\n   */\r\n  $(function () {\r\n    // Init\r\n    require('./frontend/search-form').init();\r\n\r\n    tippy('[data-awebooking=\"tooltip\"]', [\r\n\r\n    ]);\r\n  });\r\n\r\n})(jQuery, window.awebooking);\r\n"],"file":"awebooking.js"}