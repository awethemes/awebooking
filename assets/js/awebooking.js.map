{"version":3,"names":[],"mappings":"","sources":["awebooking.js"],"sourcesContent":["const lodashDefaults = require('lodash.defaults');\n\n(function ($) {\n  'use strict';\n\n  // Polyfill location.origin in IE, @see https://stackoverflow.com/a/25495161\n  if (!window.location.origin) {\n    window.location.origin = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n  }\n\n  /**\n   * The awebooking main object.\n   *\n   * @type {Object}\n   */\n  window.awebooking = {};\n\n  // Alias of awebooking.\n  const self = awebooking;\n\n  // Sub objects\n  awebooking.utils = {};\n  awebooking.instances = {};\n  awebooking.utils.rangeDates = require('./core/flatpickr-dates.js');\n\n  /**\n   * Configure.\n   *\n   * @type {Object}\n   */\n  awebooking.config = lodashDefaults(window._awebooking, {\n    route: window.location.origin + '?awebooking_route=/',\n    ajax_url: window.location.origin + '/wp-admin/admin-ajax.php',\n    i18n: {\n      date_format: 'F j, Y',\n      time_format: 'H:i:s',\n    }\n  });\n\n  /**\n   * The admin route.\n   *\n   * @param  {string} route\n   * @return {string}\n   */\n  awebooking.route = function (route) {\n    return this.config.route + (route || '').replace(/^\\//g, '');\n  };\n\n  /**\n   * Create new datepicker.\n   *\n   * @see https://flatpickr.js.org/options/\n   *\n   * @return {flatpickr}\n   */\n  awebooking.datepicker = function (instance, options) {\n    const i18n = self.config.i18n;\n    const defaults = self.config.datepicker;\n    const disable = Array.isArray(defaults.disable) ? defaults.disable : [];\n\n    if (Array.isArray(defaults.disable_days)) {\n      disable.push(function (date) {\n        return defaults.disable_days.indexOf(date.getDay()) !== -1;\n      });\n    }\n\n    const min_date = new Date().fp_incr(defaults.min_date);\n    const max_date = (defaults.max_date && defaults.max_date !== 0) ? new Date().fp_incr(defaults.max_date) : '';\n\n    const fp = flatpickr(instance, lodashDefaults(options, {\n      dateFormat: 'Y-m-d',\n      ariaDateFormat: i18n.date_format,\n      minDate: 'today',\n      // maxDate: max_date,\n      // disable: disable,\n      showMonths: defaults.show_months,\n      enableTime: false,\n      enableSeconds: false,\n      onReady(_, __, fp) {\n        fp.calendarContainer.classList.add('awebooking-datepicker');\n      }\n    }));\n\n    return fp;\n  };\n\n  /**\n   * Document ready.\n   *\n   * @return {void}\n   */\n  $(function () {\n\n    const rangeDates = new awebooking.utils.rangeDates('.searchbox', {\n      // ...\n    });\n\n    console.log(rangeDates);\n\n  });\n\n})(jQuery);\n"],"file":"awebooking.js"}